!function(global){function postHTMLRender(tree,options){for(var optSingleTags=(options=options||{}).singleTags,closingSingleTag=options.closingSingleTag,SINGLE_TAGS=["area","base","br","col","command","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],singleTags={},regexpSingleTags=[],i=0,leni=SINGLE_TAGS.length;i<leni;i++)singleTags[SINGLE_TAGS[i]]=1;if(optSingleTags)for(var j=0,lenj=optSingleTags.length;j<lenj;j++)optSingleTags[j]instanceof RegExp?regexpSingleTags.push(optSingleTags[j]):singleTags[optSingleTags[j]]=1;return function html(tree){var buf="";!function traverse(tree,cb){if(Array.isArray(tree))for(var i=0,len=tree.length;i<len;i++)traverse(cb(tree[i]),cb);else"object"==typeof tree&&tree.hasOwnProperty("content")&&traverse(tree.content,cb);return tree}([].concat(tree),function(node){if(node)if("string"!=typeof node&&"number"!=typeof node){if("boolean"==typeof node.tag&&!node.tag)return"object"!=typeof node.content&&(buf+=node.content),node.content;if(Array.isArray(node))buf+=html(node);else{var tag=node.tag||"div";if(function(tag,strings,regexps){if(strings[tag])return!0;for(var i=0;i<regexps.length;i++)if(tag.match(regexps[i]))return!0;return!1}(tag,singleTags,regexpSingleTags))switch(buf+="<"+tag+attrs(node.attrs),closingSingleTag){case"slash":buf+=" />";break;case"tag":buf+="></"+tag+">";break;default:buf+=">"}else buf+="<"+tag+(node.attrs?attrs(node.attrs):"")+">"+(node.content?html(node.content):"")+"</"+tag+">"}}else buf+=node});return buf;function attrs(obj){var attr="";for(var key in obj)"boolean"==typeof obj[key]&&obj[key]?attr+=" "+key:"string"!=typeof obj[key]&&"number"!=typeof obj[key]||(attr+=" "+key+'="'+obj[key]+'"');return attr}}(tree)}var defineAsGlobal=!0;"object"==typeof module&&"object"==typeof module.exports&&(module.exports=postHTMLRender,defineAsGlobal=!1),"object"==typeof modules&&"function"==typeof modules.define&&(modules.define("postHTMLRender",function(provide){provide(postHTMLRender)}),defineAsGlobal=!1),"function"==typeof define&&(define(function(require,exports,module){module.exports=postHTMLRender}),defineAsGlobal=!1),defineAsGlobal&&(global.postHTMLRender=postHTMLRender)}("undefined"!=typeof window?window:global);